/*!
 * Extend Web3 for Ebakus Blockchain v0.1.3
 * 
 * @author Ebakus AG <hello@ebakus.com>
 * @website https://www.ebakus.com/
 * 
 * @copyright Ebakus 2019
 * @license MIT
 */
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports["web3-ebakus"]=r():e.Web3Ebakus=r()}(this,(function(){return function(e){var r={};function o(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=e,o.c=r,o.d=function(e,r,t){o.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,r){if(1&r&&(e=o(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var s in e)o.d(t,s,function(r){return e[r]}.bind(null,s));return t},o.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(r,"a",r),r},o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},o.p="",o(o.s=136)}([function(e,r){e.exports=require("eth-lib/lib/bytes")},function(e,r){e.exports=require("eth-lib/lib/rlp")},function(e,r){e.exports=require("eth-lib/lib/account")},function(e,r){e.exports=require("eth-lib/lib/hash")},function(e,r){e.exports=require("eth-lib/lib/nat")},function(e,r,o){(function(r){e.exports=function(){return new r("./node_modules/web3-ebakus/lib/calculateWorkNonce.js")}}).call(this,o(135).Worker)},function(e,r){e.exports=require("core-js/modules/es6.array.copy-within")},function(e,r){e.exports=require("core-js/modules/es6.array.fill")},function(e,r){e.exports=require("core-js/modules/es6.array.find")},function(e,r){e.exports=require("core-js/modules/es6.array.find-index")},function(e,r){e.exports=require("core-js/modules/es7.array.flat-map")},function(e,r){e.exports=require("core-js/modules/es6.array.from")},function(e,r){e.exports=require("core-js/modules/es7.array.includes")},function(e,r){e.exports=require("core-js/modules/es6.array.iterator")},function(e,r){e.exports=require("core-js/modules/es6.array.of")},function(e,r){e.exports=require("core-js/modules/es6.array.sort")},function(e,r){e.exports=require("core-js/modules/es6.array.species")},function(e,r){e.exports=require("core-js/modules/es6.date.to-primitive")},function(e,r){e.exports=require("core-js/modules/es6.function.has-instance")},function(e,r){e.exports=require("core-js/modules/es6.function.name")},function(e,r){e.exports=require("core-js/modules/es6.map")},function(e,r){e.exports=require("core-js/modules/es6.math.acosh")},function(e,r){e.exports=require("core-js/modules/es6.math.asinh")},function(e,r){e.exports=require("core-js/modules/es6.math.atanh")},function(e,r){e.exports=require("core-js/modules/es6.math.cbrt")},function(e,r){e.exports=require("core-js/modules/es6.math.clz32")},function(e,r){e.exports=require("core-js/modules/es6.math.cosh")},function(e,r){e.exports=require("core-js/modules/es6.math.expm1")},function(e,r){e.exports=require("core-js/modules/es6.math.fround")},function(e,r){e.exports=require("core-js/modules/es6.math.hypot")},function(e,r){e.exports=require("core-js/modules/es6.math.imul")},function(e,r){e.exports=require("core-js/modules/es6.math.log1p")},function(e,r){e.exports=require("core-js/modules/es6.math.log10")},function(e,r){e.exports=require("core-js/modules/es6.math.log2")},function(e,r){e.exports=require("core-js/modules/es6.math.sign")},function(e,r){e.exports=require("core-js/modules/es6.math.sinh")},function(e,r){e.exports=require("core-js/modules/es6.math.tanh")},function(e,r){e.exports=require("core-js/modules/es6.math.trunc")},function(e,r){e.exports=require("core-js/modules/es6.number.constructor")},function(e,r){e.exports=require("core-js/modules/es6.number.epsilon")},function(e,r){e.exports=require("core-js/modules/es6.number.is-finite")},function(e,r){e.exports=require("core-js/modules/es6.number.is-integer")},function(e,r){e.exports=require("core-js/modules/es6.number.is-nan")},function(e,r){e.exports=require("core-js/modules/es6.number.is-safe-integer")},function(e,r){e.exports=require("core-js/modules/es6.number.max-safe-integer")},function(e,r){e.exports=require("core-js/modules/es6.number.min-safe-integer")},function(e,r){e.exports=require("core-js/modules/es6.number.parse-float")},function(e,r){e.exports=require("core-js/modules/es6.number.parse-int")},function(e,r){e.exports=require("core-js/modules/es6.object.assign")},function(e,r){e.exports=require("core-js/modules/es7.object.define-getter")},function(e,r){e.exports=require("core-js/modules/es7.object.define-setter")},function(e,r){e.exports=require("core-js/modules/es7.object.entries")},function(e,r){e.exports=require("core-js/modules/es6.object.freeze")},function(e,r){e.exports=require("core-js/modules/es6.object.get-own-property-descriptor")},function(e,r){e.exports=require("core-js/modules/es7.object.get-own-property-descriptors")},function(e,r){e.exports=require("core-js/modules/es6.object.get-own-property-names")},function(e,r){e.exports=require("core-js/modules/es6.object.get-prototype-of")},function(e,r){e.exports=require("core-js/modules/es7.object.lookup-getter")},function(e,r){e.exports=require("core-js/modules/es7.object.lookup-setter")},function(e,r){e.exports=require("core-js/modules/es6.object.prevent-extensions")},function(e,r){e.exports=require("core-js/modules/es6.object.to-string")},function(e,r){e.exports=require("core-js/modules/es6.object.is")},function(e,r){e.exports=require("core-js/modules/es6.object.is-frozen")},function(e,r){e.exports=require("core-js/modules/es6.object.is-sealed")},function(e,r){e.exports=require("core-js/modules/es6.object.is-extensible")},function(e,r){e.exports=require("core-js/modules/es6.object.keys")},function(e,r){e.exports=require("core-js/modules/es6.object.seal")},function(e,r){e.exports=require("core-js/modules/es6.object.set-prototype-of")},function(e,r){e.exports=require("core-js/modules/es7.object.values")},function(e,r){e.exports=require("core-js/modules/es6.promise")},function(e,r){e.exports=require("core-js/modules/es7.promise.finally")},function(e,r){e.exports=require("core-js/modules/es6.reflect.apply")},function(e,r){e.exports=require("core-js/modules/es6.reflect.construct")},function(e,r){e.exports=require("core-js/modules/es6.reflect.define-property")},function(e,r){e.exports=require("core-js/modules/es6.reflect.delete-property")},function(e,r){e.exports=require("core-js/modules/es6.reflect.get")},function(e,r){e.exports=require("core-js/modules/es6.reflect.get-own-property-descriptor")},function(e,r){e.exports=require("core-js/modules/es6.reflect.get-prototype-of")},function(e,r){e.exports=require("core-js/modules/es6.reflect.has")},function(e,r){e.exports=require("core-js/modules/es6.reflect.is-extensible")},function(e,r){e.exports=require("core-js/modules/es6.reflect.own-keys")},function(e,r){e.exports=require("core-js/modules/es6.reflect.prevent-extensions")},function(e,r){e.exports=require("core-js/modules/es6.reflect.set")},function(e,r){e.exports=require("core-js/modules/es6.reflect.set-prototype-of")},function(e,r){e.exports=require("core-js/modules/es6.regexp.constructor")},function(e,r){e.exports=require("core-js/modules/es6.regexp.flags")},function(e,r){e.exports=require("core-js/modules/es6.regexp.match")},function(e,r){e.exports=require("core-js/modules/es6.regexp.replace")},function(e,r){e.exports=require("core-js/modules/es6.regexp.split")},function(e,r){e.exports=require("core-js/modules/es6.regexp.search")},function(e,r){e.exports=require("core-js/modules/es6.regexp.to-string")},function(e,r){e.exports=require("core-js/modules/es6.set")},function(e,r){e.exports=require("core-js/modules/es6.symbol")},function(e,r){e.exports=require("core-js/modules/es7.symbol.async-iterator")},function(e,r){e.exports=require("core-js/modules/es6.string.anchor")},function(e,r){e.exports=require("core-js/modules/es6.string.big")},function(e,r){e.exports=require("core-js/modules/es6.string.blink")},function(e,r){e.exports=require("core-js/modules/es6.string.bold")},function(e,r){e.exports=require("core-js/modules/es6.string.code-point-at")},function(e,r){e.exports=require("core-js/modules/es6.string.ends-with")},function(e,r){e.exports=require("core-js/modules/es6.string.fixed")},function(e,r){e.exports=require("core-js/modules/es6.string.fontcolor")},function(e,r){e.exports=require("core-js/modules/es6.string.fontsize")},function(e,r){e.exports=require("core-js/modules/es6.string.from-code-point")},function(e,r){e.exports=require("core-js/modules/es6.string.includes")},function(e,r){e.exports=require("core-js/modules/es6.string.italics")},function(e,r){e.exports=require("core-js/modules/es6.string.iterator")},function(e,r){e.exports=require("core-js/modules/es6.string.link")},function(e,r){e.exports=require("core-js/modules/es7.string.pad-start")},function(e,r){e.exports=require("core-js/modules/es7.string.pad-end")},function(e,r){e.exports=require("core-js/modules/es6.string.raw")},function(e,r){e.exports=require("core-js/modules/es6.string.repeat")},function(e,r){e.exports=require("core-js/modules/es6.string.small")},function(e,r){e.exports=require("core-js/modules/es6.string.starts-with")},function(e,r){e.exports=require("core-js/modules/es6.string.strike")},function(e,r){e.exports=require("core-js/modules/es6.string.sub")},function(e,r){e.exports=require("core-js/modules/es6.string.sup")},function(e,r){e.exports=require("core-js/modules/es7.string.trim-left")},function(e,r){e.exports=require("core-js/modules/es7.string.trim-right")},function(e,r){e.exports=require("core-js/modules/es6.typed.array-buffer")},function(e,r){e.exports=require("core-js/modules/es6.typed.int8-array")},function(e,r){e.exports=require("core-js/modules/es6.typed.uint8-array")},function(e,r){e.exports=require("core-js/modules/es6.typed.uint8-clamped-array")},function(e,r){e.exports=require("core-js/modules/es6.typed.int16-array")},function(e,r){e.exports=require("core-js/modules/es6.typed.uint16-array")},function(e,r){e.exports=require("core-js/modules/es6.typed.int32-array")},function(e,r){e.exports=require("core-js/modules/es6.typed.uint32-array")},function(e,r){e.exports=require("core-js/modules/es6.typed.float32-array")},function(e,r){e.exports=require("core-js/modules/es6.typed.float64-array")},function(e,r){e.exports=require("core-js/modules/es6.weak-map")},function(e,r){e.exports=require("core-js/modules/es6.weak-set")},function(e,r){e.exports=require("core-js/modules/web.timers")},function(e,r){e.exports=require("core-js/modules/web.immediate")},function(e,r){e.exports=require("core-js/modules/web.dom.iterable")},function(e,r){e.exports=require("regenerator-runtime/runtime")},function(e,r){e.exports=require("worker_threads")},function(e,r,o){"use strict";o.r(r),o(6),o(7),o(8),o(9),o(10),o(11),o(12),o(13),o(14),o(15),o(16),o(17),o(18),o(19),o(20),o(21),o(22),o(23),o(24),o(25),o(26),o(27),o(28),o(29),o(30),o(31),o(32),o(33),o(34),o(35),o(36),o(37),o(38),o(39),o(40),o(41),o(42),o(43),o(44),o(45),o(46),o(47),o(48),o(49),o(50),o(51),o(52),o(53),o(54),o(55),o(56),o(57),o(58),o(59),o(60),o(61),o(62),o(63),o(64),o(65),o(66),o(67),o(68),o(69),o(70),o(71),o(72),o(73),o(74),o(75),o(76),o(77),o(78),o(79),o(80),o(81),o(82),o(83),o(84),o(85),o(86),o(87),o(88),o(89),o(90),o(91),o(92),o(93),o(94),o(95),o(96),o(97),o(98),o(99),o(100),o(101),o(102),o(103),o(104),o(105),o(106),o(107),o(108),o(109),o(110),o(111),o(112),o(113),o(114),o(115),o(116),o(117),o(118),o(119),o(120),o(121),o(122),o(123),o(124),o(125),o(126),o(127),o(128),o(129),o(130),o(131),o(132),o(133),o(134);var t,s=o(1),n=o.n(s),u=o(0),i=o.n(u),c=o(2),a=o.n(c),l=o(3),f=o.n(l),p=o(4),m=o.n(p);function d(e,r){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),o.push.apply(o,t)}return o}function x(e,r,o){return r in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,e}var j=function(e){return null==e},b=function(e){for(;e&&e.startsWith("0x0");)e="0x".concat(e.slice(3));return e},q=function(e){return e.length%2==1&&(e=e.replace("0x","0x0")),e},y=function(e,r,o){var s,u=!1;if(o=o||function(){},!e)return u=new Error("No transaction object given!"),o(u),Promise.reject(u);function c(e){if(e.gas||e.gasLimit||(u=new Error("gas is missing")),(e.nonce<0||e.gas<0||e.workNonce<0||e.chainId<0)&&(u=new Error("Gas, gasPrice, nonce or chainId is lower than 0")),u)return o(u),Promise.reject(u);try{var c=e=t.extend.formatters.inputCallFormatter(e);c.to=e.to||"0x",c.data=e.data||"0x",c.value=e.value||"0x",c.chainId=t.utils.numberToHex(e.chainId);var l=n.a.encode([i.a.fromNat(c.nonce),i.a.fromNat(c.workNonce||"0x"),i.a.fromNat(c.gas),c.to.toLowerCase(),i.a.fromNat(c.value),c.data,i.a.fromNat(c.chainId||"0x1"),"0x","0x"]),p=f.a.keccak256(l),d=a.a.makeSigner(2*m.a.toNumber(c.chainId||"0x1")+35)(f.a.keccak256(l),r),x=n.a.decode(l).slice(0,6).concat(a.a.decodeSignature(d));x[6]=q(b(x[6])),x[7]=q(b(x[7])),x[8]=q(b(x[8]));var j=n.a.encode(x),y=n.a.decode(j);s={messageHash:p,v:b(y[6]),r:b(y[7]),s:b(y[8]),rawTransaction:j}}catch(e){return o(e),Promise.reject(e)}return o(null,s),s}return void 0!==e.nonce&&void 0!==e.chainId?Promise.resolve(c(e)):Promise.all([j(e.chainId)?t.eth.net.getId():e.chainId,j(e.nonce)?t.eth.getTransactionCount(t.eth.accounts.privateKeyToAccount(r).address):e.nonce]).then((function(r){if(j(r[0])||j(r[1]))throw new Error("One of the values 'chainId', or 'nonce' couldn't be fetched: ".concat(JSON.stringify(r)));return c(function(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?d(Object(o),!0).forEach((function(r){x(e,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))}))}return e}({},e,{chainId:r[0],nonce:r[1]}))}))};function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=function(){try{if("object"===("undefined"==typeof WebAssembly?"undefined":g(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1}(),w=o(5),v=o.n(w);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.default=function(e){e.eth.calculateWorkForTransaction=function(r,o,t,s){var u=!1;return s=s||function(){},h?r?Promise.resolve(function(r){var u,c,a,l,f,p;return regeneratorRuntime.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(u=0,c=!1,null!==t&&"object"===k(t)&&(t.isRunning=function(){return c},t.getCurrentWorkNonce=function(){return u},t.kill=function(){c=!1,u=0,a&&a.terminate(),l&&l("Worker terminated by user")}),m.prev=3,o){m.next=8;break}return m.next=7,regeneratorRuntime.awrap(e.eth.suggestDifficulty(r.to));case 7:o=m.sent;case 8:if(r.nonce||0===r.nonce){m.next=12;break}return m.next=11,regeneratorRuntime.awrap(e.eth.getTransactionCount(r.to));case 11:r.nonce=m.sent;case 12:return r=e.extend.formatters.inputCallFormatter(r),f=n.a.encode([i.a.fromNat(r.nonce),i.a.fromNat(r.gas),r.to?r.to.toLowerCase():"",i.a.fromNat(r.value||"0x"),r.data||"0x"]),p={hash:f,targetDifficulty:o},m.abrupt("return",new Promise((function(o,t){a=new v.a,l=t,a.on("message",(function(t){var n=t.cmd,i=t.workNonce;switch(n){case"ready":c=!0,a.postMessage(p);break;case"current":u=i;break;case"finished":r.workNonce=e.utils.numberToHex(i),u=r.workNonce,c=!1,a.terminate(),s(null,r),o(r);break;default:console.warn("Unknown data from worker",t)}})),a.on("error",(function(e){throw e})),a.on("exit",(function(e){if(1===e)return null;var r=new Error("Worker has stopped with code ".concat(e));return s(r),Promise.reject(r)}))})));case 18:return m.prev=18,m.t0=m.catch(3),s(m.t0),m.abrupt("return",Promise.reject(m.t0));case 22:case"end":return m.stop()}}),null,null,[[3,18]])}(r)):(u=new Error("No transaction object given!"),s(u),Promise.reject(u)):(u=new Error("Wasm is not supported by browser. CryptoNight can't load."),s(u),Promise.reject(u))},e.eth.extend({methods:[{name:"suggestDifficulty",call:"eth_suggestDifficulty",params:1,inputFormatter:[e.utils.toChecksumAddress],outputFormatter:e.utils.toFloat}]});var r=e.eth.accounts._addAccountFunctions;return e.eth.accounts._addAccountFunctions=function(o){return(o=r.call(this,o)).signTransaction=function(e,r){return y(e,o.privateKey,r)},o.calculateWorkForTransaction=e.eth.calculateWorkForTransaction,o},e.eth.accounts.signTransaction=function(e,r,o){return y(e,r,o)},t=e,e.extend({property:"db",methods:[{name:"get",call:"db_get",params:5,inputFormatter:[e.utils.inputAddressFormatter,null,null,null,e.utils.inputBlockNumberFormatter]},{name:"select",call:"db_select",params:5,inputFormatter:[e.utils.inputAddressFormatter,null,null,null,e.utils.inputBlockNumberFormatter]},{name:"next",call:"db_next",params:1,inputFormatter:[null]}]}),e}}]).default}));