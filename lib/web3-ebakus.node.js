/*!
 * Extend Web3 for Ebakus Blockchain v0.1.3
 * 
 * @author Ebakus AG <hello@ebakus.com>
 * @website https://www.ebakus.com/
 * 
 * @copyright Ebakus 2020
 * @license MIT
 */
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports["web3-ebakus"]=r():e.Web3Ebakus=r()}(this,(function(){return function(e){var r={};function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=r,o.d=function(e,r,t){o.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,r){if(1&r&&(e=o(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)o.d(t,n,function(r){return e[r]}.bind(null,n));return t},o.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(r,"a",r),r},o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},o.p="",o(o.s=136)}([function(e,r){e.exports=require("eth-lib/lib/bytes")},function(e,r){e.exports=require("eth-lib/lib/rlp")},function(e,r){e.exports=require("eth-lib/lib/account")},function(e,r){e.exports=require("eth-lib/lib/hash")},function(e,r,o){(function(r){e.exports=function(){return new r("./node_modules/web3-ebakus/lib/calculateWorkNonce.js")}}).call(this,o(135).Worker)},function(e,r){e.exports=require("eth-lib/lib/nat")},function(e,r){e.exports=require("core-js/modules/es6.array.copy-within")},function(e,r){e.exports=require("core-js/modules/es6.array.fill")},function(e,r){e.exports=require("core-js/modules/es6.array.find")},function(e,r){e.exports=require("core-js/modules/es6.array.find-index")},function(e,r){e.exports=require("core-js/modules/es7.array.flat-map")},function(e,r){e.exports=require("core-js/modules/es6.array.from")},function(e,r){e.exports=require("core-js/modules/es7.array.includes")},function(e,r){e.exports=require("core-js/modules/es6.array.iterator")},function(e,r){e.exports=require("core-js/modules/es6.array.of")},function(e,r){e.exports=require("core-js/modules/es6.array.sort")},function(e,r){e.exports=require("core-js/modules/es6.array.species")},function(e,r){e.exports=require("core-js/modules/es6.date.to-primitive")},function(e,r){e.exports=require("core-js/modules/es6.function.has-instance")},function(e,r){e.exports=require("core-js/modules/es6.function.name")},function(e,r){e.exports=require("core-js/modules/es6.map")},function(e,r){e.exports=require("core-js/modules/es6.math.acosh")},function(e,r){e.exports=require("core-js/modules/es6.math.asinh")},function(e,r){e.exports=require("core-js/modules/es6.math.atanh")},function(e,r){e.exports=require("core-js/modules/es6.math.cbrt")},function(e,r){e.exports=require("core-js/modules/es6.math.clz32")},function(e,r){e.exports=require("core-js/modules/es6.math.cosh")},function(e,r){e.exports=require("core-js/modules/es6.math.expm1")},function(e,r){e.exports=require("core-js/modules/es6.math.fround")},function(e,r){e.exports=require("core-js/modules/es6.math.hypot")},function(e,r){e.exports=require("core-js/modules/es6.math.imul")},function(e,r){e.exports=require("core-js/modules/es6.math.log1p")},function(e,r){e.exports=require("core-js/modules/es6.math.log10")},function(e,r){e.exports=require("core-js/modules/es6.math.log2")},function(e,r){e.exports=require("core-js/modules/es6.math.sign")},function(e,r){e.exports=require("core-js/modules/es6.math.sinh")},function(e,r){e.exports=require("core-js/modules/es6.math.tanh")},function(e,r){e.exports=require("core-js/modules/es6.math.trunc")},function(e,r){e.exports=require("core-js/modules/es6.number.constructor")},function(e,r){e.exports=require("core-js/modules/es6.number.epsilon")},function(e,r){e.exports=require("core-js/modules/es6.number.is-finite")},function(e,r){e.exports=require("core-js/modules/es6.number.is-integer")},function(e,r){e.exports=require("core-js/modules/es6.number.is-nan")},function(e,r){e.exports=require("core-js/modules/es6.number.is-safe-integer")},function(e,r){e.exports=require("core-js/modules/es6.number.max-safe-integer")},function(e,r){e.exports=require("core-js/modules/es6.number.min-safe-integer")},function(e,r){e.exports=require("core-js/modules/es6.number.parse-float")},function(e,r){e.exports=require("core-js/modules/es6.number.parse-int")},function(e,r){e.exports=require("core-js/modules/es6.object.assign")},function(e,r){e.exports=require("core-js/modules/es7.object.define-getter")},function(e,r){e.exports=require("core-js/modules/es7.object.define-setter")},function(e,r){e.exports=require("core-js/modules/es7.object.entries")},function(e,r){e.exports=require("core-js/modules/es6.object.freeze")},function(e,r){e.exports=require("core-js/modules/es6.object.get-own-property-descriptor")},function(e,r){e.exports=require("core-js/modules/es7.object.get-own-property-descriptors")},function(e,r){e.exports=require("core-js/modules/es6.object.get-own-property-names")},function(e,r){e.exports=require("core-js/modules/es6.object.get-prototype-of")},function(e,r){e.exports=require("core-js/modules/es7.object.lookup-getter")},function(e,r){e.exports=require("core-js/modules/es7.object.lookup-setter")},function(e,r){e.exports=require("core-js/modules/es6.object.prevent-extensions")},function(e,r){e.exports=require("core-js/modules/es6.object.to-string")},function(e,r){e.exports=require("core-js/modules/es6.object.is")},function(e,r){e.exports=require("core-js/modules/es6.object.is-frozen")},function(e,r){e.exports=require("core-js/modules/es6.object.is-sealed")},function(e,r){e.exports=require("core-js/modules/es6.object.is-extensible")},function(e,r){e.exports=require("core-js/modules/es6.object.keys")},function(e,r){e.exports=require("core-js/modules/es6.object.seal")},function(e,r){e.exports=require("core-js/modules/es6.object.set-prototype-of")},function(e,r){e.exports=require("core-js/modules/es7.object.values")},function(e,r){e.exports=require("core-js/modules/es6.promise")},function(e,r){e.exports=require("core-js/modules/es7.promise.finally")},function(e,r){e.exports=require("core-js/modules/es6.reflect.apply")},function(e,r){e.exports=require("core-js/modules/es6.reflect.construct")},function(e,r){e.exports=require("core-js/modules/es6.reflect.define-property")},function(e,r){e.exports=require("core-js/modules/es6.reflect.delete-property")},function(e,r){e.exports=require("core-js/modules/es6.reflect.get")},function(e,r){e.exports=require("core-js/modules/es6.reflect.get-own-property-descriptor")},function(e,r){e.exports=require("core-js/modules/es6.reflect.get-prototype-of")},function(e,r){e.exports=require("core-js/modules/es6.reflect.has")},function(e,r){e.exports=require("core-js/modules/es6.reflect.is-extensible")},function(e,r){e.exports=require("core-js/modules/es6.reflect.own-keys")},function(e,r){e.exports=require("core-js/modules/es6.reflect.prevent-extensions")},function(e,r){e.exports=require("core-js/modules/es6.reflect.set")},function(e,r){e.exports=require("core-js/modules/es6.reflect.set-prototype-of")},function(e,r){e.exports=require("core-js/modules/es6.regexp.constructor")},function(e,r){e.exports=require("core-js/modules/es6.regexp.flags")},function(e,r){e.exports=require("core-js/modules/es6.regexp.match")},function(e,r){e.exports=require("core-js/modules/es6.regexp.replace")},function(e,r){e.exports=require("core-js/modules/es6.regexp.split")},function(e,r){e.exports=require("core-js/modules/es6.regexp.search")},function(e,r){e.exports=require("core-js/modules/es6.regexp.to-string")},function(e,r){e.exports=require("core-js/modules/es6.set")},function(e,r){e.exports=require("core-js/modules/es6.symbol")},function(e,r){e.exports=require("core-js/modules/es7.symbol.async-iterator")},function(e,r){e.exports=require("core-js/modules/es6.string.anchor")},function(e,r){e.exports=require("core-js/modules/es6.string.big")},function(e,r){e.exports=require("core-js/modules/es6.string.blink")},function(e,r){e.exports=require("core-js/modules/es6.string.bold")},function(e,r){e.exports=require("core-js/modules/es6.string.code-point-at")},function(e,r){e.exports=require("core-js/modules/es6.string.ends-with")},function(e,r){e.exports=require("core-js/modules/es6.string.fixed")},function(e,r){e.exports=require("core-js/modules/es6.string.fontcolor")},function(e,r){e.exports=require("core-js/modules/es6.string.fontsize")},function(e,r){e.exports=require("core-js/modules/es6.string.from-code-point")},function(e,r){e.exports=require("core-js/modules/es6.string.includes")},function(e,r){e.exports=require("core-js/modules/es6.string.italics")},function(e,r){e.exports=require("core-js/modules/es6.string.iterator")},function(e,r){e.exports=require("core-js/modules/es6.string.link")},function(e,r){e.exports=require("core-js/modules/es7.string.pad-start")},function(e,r){e.exports=require("core-js/modules/es7.string.pad-end")},function(e,r){e.exports=require("core-js/modules/es6.string.raw")},function(e,r){e.exports=require("core-js/modules/es6.string.repeat")},function(e,r){e.exports=require("core-js/modules/es6.string.small")},function(e,r){e.exports=require("core-js/modules/es6.string.starts-with")},function(e,r){e.exports=require("core-js/modules/es6.string.strike")},function(e,r){e.exports=require("core-js/modules/es6.string.sub")},function(e,r){e.exports=require("core-js/modules/es6.string.sup")},function(e,r){e.exports=require("core-js/modules/es7.string.trim-left")},function(e,r){e.exports=require("core-js/modules/es7.string.trim-right")},function(e,r){e.exports=require("core-js/modules/es6.typed.array-buffer")},function(e,r){e.exports=require("core-js/modules/es6.typed.int8-array")},function(e,r){e.exports=require("core-js/modules/es6.typed.uint8-array")},function(e,r){e.exports=require("core-js/modules/es6.typed.uint8-clamped-array")},function(e,r){e.exports=require("core-js/modules/es6.typed.int16-array")},function(e,r){e.exports=require("core-js/modules/es6.typed.uint16-array")},function(e,r){e.exports=require("core-js/modules/es6.typed.int32-array")},function(e,r){e.exports=require("core-js/modules/es6.typed.uint32-array")},function(e,r){e.exports=require("core-js/modules/es6.typed.float32-array")},function(e,r){e.exports=require("core-js/modules/es6.typed.float64-array")},function(e,r){e.exports=require("core-js/modules/es6.weak-map")},function(e,r){e.exports=require("core-js/modules/es6.weak-set")},function(e,r){e.exports=require("core-js/modules/web.timers")},function(e,r){e.exports=require("core-js/modules/web.immediate")},function(e,r){e.exports=require("core-js/modules/web.dom.iterable")},function(e,r){e.exports=require("regenerator-runtime/runtime")},function(e,r){e.exports=require("worker_threads")},function(r,o,t){"use strict";t.r(o),t(6),t(7),t(8),t(9),t(10),t(11),t(12),t(13),t(14),t(15),t(16),t(17),t(18),t(19),t(20),t(21),t(22),t(23),t(24),t(25),t(26),t(27),t(28),t(29),t(30),t(31),t(32),t(33),t(34),t(35),t(36),t(37),t(38),t(39),t(40),t(41),t(42),t(43),t(44),t(45),t(46),t(47),t(48),t(49),t(50),t(51),t(52),t(53),t(54),t(55),t(56),t(57),t(58),t(59),t(60),t(61),t(62),t(63),t(64),t(65),t(66),t(67),t(68),t(69),t(70),t(71),t(72),t(73),t(74),t(75),t(76),t(77),t(78),t(79),t(80),t(81),t(82),t(83),t(84),t(85),t(86),t(87),t(88),t(89),t(90),t(91),t(92),t(93),t(94),t(95),t(96),t(97),t(98),t(99),t(100),t(101),t(102),t(103),t(104),t(105),t(106),t(107),t(108),t(109),t(110),t(111),t(112),t(113),t(114),t(115),t(116),t(117),t(118),t(119),t(120),t(121),t(122),t(123),t(124),t(125),t(126),t(127),t(128),t(129),t(130),t(131),t(132),t(133),t(134);var n,s=t(1),u=t.n(s),i=t(0),c=t.n(i),a=t(2),l=t.n(a),f=t(3),p=t.n(f),m=t(5),d=t.n(m);function x(e,r){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),o.push.apply(o,t)}return o}function j(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?x(Object(o),!0).forEach((function(r){b(e,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):x(Object(o)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))}))}return e}function b(e,r,o){return r in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,e}var y=function(e){return null==e},q=function(e){for(;e&&e.startsWith("0x0");)e="0x".concat(e.slice(3));return e},g=function(e){return e.length%2==1&&(e=e.replace("0x","0x0")),e},h=function(e,r,o){var t,s=!1;if(o=o||function(){},!e)return s=new Error("No transaction object given!"),o(s),Promise.reject(s);function i(e){if(e.gas||e.gasLimit||(s=new Error("gas is missing")),(e.nonce<0||e.gas<0||e.workNonce<0||e.chainId<0)&&(s=new Error("Gas, gasPrice, nonce or chainId is lower than 0")),s)return o(s),Promise.reject(s);try{var i=n.extend.formatters.inputCallFormatter(j({},e,{gasPrice:"0"}));i.to=i.to||"0x",i.data=i.data||"0x",i.value=i.value||"0x",i.chainId=n.utils.numberToHex(i.chainId);var a=u.a.encode([c.a.fromNat(i.nonce),c.a.fromNat(i.workNonce||"0x"),c.a.fromNat(i.gas),i.to.toLowerCase(),c.a.fromNat(i.value),i.data,c.a.fromNat(i.chainId||"0x1"),"0x","0x"]),f=p.a.keccak256(a),m=l.a.makeSigner(2*d.a.toNumber(i.chainId||"0x1")+35)(p.a.keccak256(a),r),x=u.a.decode(a).slice(0,6).concat(l.a.decodeSignature(m));x[6]=g(q(x[6])),x[7]=g(q(x[7])),x[8]=g(q(x[8]));var b=u.a.encode(x),y=u.a.decode(b);t={messageHash:f,v:q(y[6]),r:q(y[7]),s:q(y[8]),rawTransaction:b}}catch(e){return o(e),Promise.reject(e)}return o(null,t),t}return void 0!==e.nonce&&void 0!==e.chainId?Promise.resolve(i(e)):Promise.all([y(e.chainId)?n.eth.net.getId():e.chainId,y(e.nonce)?n.eth.getTransactionCount(n.eth.accounts.privateKeyToAccount(r).address):e.nonce]).then((function(r){if(y(r[0])||y(r[1]))throw new Error("One of the values 'chainId', or 'nonce' couldn't be fetched: ".concat(JSON.stringify(r)));return i(j({},e,{chainId:r[0],nonce:r[1]}))}))};function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v,k=function(){try{if("object"===("undefined"==typeof WebAssembly?"undefined":w(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1}(),P=t(4),O=t.n(P);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var W=function(r){if(v&&v>0)return Promise.resolve(v);var o,t,n=!1;return r=r||function(){},k?Promise.resolve(regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t={benchmark:!0},n.abrupt("return",new Promise((function(n){(o=new O.a).on("message",(function(s){var u=s.cmd,i=s.callsPerSecond;switch(u){case"ready":o.postMessage(t);break;case"finished":o.terminate(),v=i,r(null,i),n(i);break;default:console.warn("Unknown data from worker",e.data)}})),o.on("error",(function(e){throw e})),o.on("exit",(function(e){if(1===e)return null;var o=new Error("Worker has stopped with code ".concat(e));return r(o),Promise.reject(o)}))})));case 5:return n.prev=5,n.t0=n.catch(0),r(n.t0),n.abrupt("return",Promise.reject(n.t0));case 9:case"end":return n.stop()}}),null,null,[[0,5]])):(n=new Error("Wasm is not supported by browser. PoW function can't load."),r(n),Promise.reject(n))};o.default=function(e){e.eth.calculateWorkForTransaction=function(r,o,t,n){var s=!1;return n=n||function(){},k?r?Promise.resolve(function(r){var s,i,a,l,f,p;return regeneratorRuntime.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(s=0,i=!1,null!==t&&"object"===N(t)&&(t.isRunning=function(){return i},t.getCurrentWorkNonce=function(){return s},t.kill=function(){i=!1,s=0,a&&a.terminate(),l&&l("Worker terminated by user")}),m.prev=3,o){m.next=8;break}return m.next=7,regeneratorRuntime.awrap(e.eth.suggestDifficulty(r.to));case 7:o=m.sent;case 8:if(r.nonce||0===r.nonce){m.next=12;break}return m.next=11,regeneratorRuntime.awrap(e.eth.getTransactionCount(r.to));case 11:r.nonce=m.sent;case 12:if(r.gas){m.next=16;break}return m.next=15,regeneratorRuntime.awrap(e.eth.estimateGas(r));case 15:r.gas=m.sent;case 16:return r=e.extend.formatters.inputCallFormatter(r),f=u.a.encode([c.a.fromNat(r.nonce),c.a.fromNat(r.gas),r.to?r.to.toLowerCase():"",c.a.fromNat(r.value||"0x"),r.data||"0x"]),p={hash:f,targetDifficulty:o*e.utils.hexToNumber(r.gas)},m.abrupt("return",new Promise((function(o,t){a=new O.a,l=t,a.on("message",(function(t){var u=t.cmd,c=t.workNonce;switch(u){case"ready":i=!0,a.postMessage(p);break;case"current":s=c;break;case"finished":r.workNonce=e.utils.numberToHex(c),s=r.workNonce,i=!1,a.terminate(),n(null,r),o(r);break;default:console.warn("Unknown data from worker",t)}})),a.on("error",(function(e){throw e})),a.on("exit",(function(e){if(1===e)return null;var r=new Error("Worker has stopped with code ".concat(e));return n(r),Promise.reject(r)}))})));case 22:return m.prev=22,m.t0=m.catch(3),n(m.t0),m.abrupt("return",Promise.reject(m.t0));case 26:case"end":return m.stop()}}),null,null,[[3,22]])}(r)):(s=new Error("No transaction object given!"),n(s),Promise.reject(s)):(s=new Error("Wasm is not supported by browser. CryptoNight can't load."),n(s),Promise.reject(s))},e.eth.estimatePoWTime=function(){var e,r,o,t,n,s,u,i=arguments;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:2,r=i.length>1&&void 0!==i[1]?i[1]:21e3,(o=i.length>2?i[2]:void 0)||"function"==typeof(t=Array.prototype.slice.call(i))[t.length-1]&&(o=t.pop()),o=o||function(){},c.prev=5,c.next=8,regeneratorRuntime.awrap(W());case 8:return n=c.sent,s=Math.log2(e*r),s=Math.ceil(s),u=Number((s/n*1e4%60).toFixed(2)),o(null,u),c.abrupt("return",Promise.resolve(u));case 16:return c.prev=16,c.t0=c.catch(5),o(c.t0),c.abrupt("return",Promise.reject(c.t0));case 20:case"end":return c.stop()}}),null,null,[[5,16]])},e.eth.extend({methods:[{name:"suggestDifficulty",call:"eth_suggestDifficulty",params:1,inputFormatter:[e.utils.toChecksumAddress],outputFormatter:e.utils.toFloat}]});var r=e.eth.accounts.__proto__._addAccountFunctions;return e.eth.accounts.__proto__._addAccountFunctions=function(o){return(o=r.call(this,o)).signTransaction=function(e,r){return h(e,o.privateKey,r)},o.calculateWorkForTransaction=e.eth.calculateWorkForTransaction,o},e.eth.accounts.signTransaction=function(e,r,o){return h(e,r,o)},n=e,e.extend({property:"db",methods:[{name:"get",call:"db_get",params:5,inputFormatter:[e.utils.inputAddressFormatter,null,null,null,e.utils.inputBlockNumberFormatter]},{name:"select",call:"db_select",params:5,inputFormatter:[e.utils.inputAddressFormatter,null,null,null,e.utils.inputBlockNumberFormatter]},{name:"next",call:"db_next",params:1,inputFormatter:[null]}]}),e}}]).default}));